# Tech Stack Policy

**HyperAgent Tech Stack Organization - Strict Separation of Concerns**

---

## ğŸ¯ Core Principle

**One language per purpose. Zero ambiguity. Maximum maintainability.**

---

## ğŸ“‹ Tech Stack Breakdown

### **Python** ğŸ
**EXCLUSIVELY for:**
- âœ… AI/LLM system integration (Alith SDK, Gemini adapter, OpenAI)
- âœ… Core agent logic and workflow orchestration
- âœ… Smart contract analysis and security auditing
- âœ… Code analysis and maintenance scripts (AI-powered)
- âœ… CLI interface (`hyperagent` command)
- âœ… RAG (Retrieval-Augmented Generation) system

**Location:** `hyperkit-agent/core/`, `hyperkit-agent/services/`, `hyperkit-agent/cli/`

**Example Files:**
- `core/agent/main.py` - Main AI agent
- `services/core/ai_agent.py` - AI system integration
- `services/rag/ipfs_rag.py` - RAG system
- `scripts/maintenance/doc_drift_audit.py` - AI-powered analysis

---

### **JavaScript (Node.js)** ğŸ“¦
**EXCLUSIVELY for:**
- âœ… All version management (`npm run version:patch`, etc.)
- âœ… All workflow automation (docs, badges, sync, release)
- âœ… All branch synchronization (`sync-to-devlog.js`, `update-readme-links.js`)
- âœ… All documentation automation (`update-docs.js`, `update-changelog.js`)
- âœ… All badge generation and maintenance
- âœ… All file manipulation and JSON processing for automation
- âœ… All npm scripts (`package.json`)

**Location:** `hyperkit-agent/scripts/release/`, `hyperkit-agent/scripts/ci/` (automation only)

**Example Files:**
- `scripts/release/version-bump.js` - Version bumping
- `scripts/release/update-docs.js` - Documentation updates
- `scripts/release/sync-to-devlog.js` - Branch synchronization
- `scripts/release/update-readme-links.js` - Link updates

**Rule:** If it's called via `npm run`, it's JavaScript. Period.

---

### **Shell (Bash)** ğŸ”§
**ONLY for:**
- âš ï¸ Emergency "break glass" scenarios
- âš ï¸ Manual one-time fixes
- âš ï¸ Critical incident response (when automation fails)

**Location:** `hyperkit-agent/scripts/emergency/`

**Example Files:**
- `scripts/emergency/emergency_patch.sh` - Critical security patch deployment

**Rule:** Shell scripts are **human-operated only** - never referenced from npm scripts or CI/CD.

---

### **Solidity** ğŸ“œ
**ONLY for:**
- âœ… Generated smart contracts (output from AI agent)
- âœ… Test contracts and demos
- âœ… Contract templates (input to agent)

**Location:** `hyperkit-agent/contracts/`, `hyperkit-agent/artifacts/`

**Rule:** Solidity files are **never edited directly by automation scripts** - only generated by the Python AI agent.

---

## ğŸš« What NOT to Do

### âŒ **NEVER:**
1. Create Python scripts for version/workflow automation
2. Create shell scripts for normal development workflows
3. Call Python scripts from npm scripts (except for AI/analysis)
4. Mix languages in automation - if it's workflow, it's JS
5. Leave duplicate scripts (Python + JS) for the same purpose
6. Use shell scripts for cross-platform automation

### âœ… **ALWAYS:**
1. Use JavaScript for all `npm run` commands
2. Use Python only for AI/LLM/core system
3. Convert/replace old Python automation scripts with JS
4. Delete old scripts immediately after JS conversion is verified
5. Document any exceptions clearly

---

## ğŸ“‚ Directory Structure

```
hyperkit-agent/
â”œâ”€â”€ core/                    # Python: AI agent, LLM integration
â”œâ”€â”€ services/                 # Python: AI services, RAG, analysis
â”œâ”€â”€ cli/                     # Python: CLI interface
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ release/             # JavaScript: Version, docs, sync automation
â”‚   â”œâ”€â”€ ci/                  # Mixed: sync_workflow.py (orchestrator), JS automation
â”‚   â”œâ”€â”€ maintenance/         # Python: AI-powered analysis scripts
â”‚   â”œâ”€â”€ emergency/           # Shell: Break-glass emergency scripts
â”‚   â””â”€â”€ dev/                 # Python: Development setup tools
â””â”€â”€ contracts/               # Solidity: Generated/test contracts only
```

---

## ğŸ”„ Migration Status

### âœ… **Completed:**
- `version-bump.js` - JavaScript version management
- `update-version-in-docs.js` - JavaScript doc version sync
- `update-readme-links.js` - JavaScript link updates
- `sync-to-devlog.js` - JavaScript branch sync
- `update-docs.js` - JavaScript doc badge updates
- `update-changelog.js` - JavaScript changelog updates
- `package.json` - All version scripts now use JavaScript

### ğŸ”„ **In Progress:**
- Converting remaining Python automation scripts to JS
- Removing old Python/shell automation scripts

### ğŸ“‹ **Python Scripts (Keep - AI/Analysis):**
- `scripts/maintenance/doc_drift_audit.py` - AI analysis
- `scripts/maintenance/doc_drift_cleanup.py` - AI-powered cleanup
- `scripts/maintenance/cli_command_inventory.py` - Code analysis
- `scripts/maintenance/legacy_file_inventory.py` - Code analysis
- `scripts/ci/sync_workflow.py` - Orchestrator (calls JS scripts)

### ğŸ—‘ï¸ **Removed (After JS Conversion Verified):**
- âœ… `scripts/ci/update_readme_links.py` â†’ **REMOVED** (replaced by `update-readme-links.js`)
- âœ… `scripts/ci/sync_to_devlog.py` â†’ **REMOVED** (replaced by `sync-to-devlog.js`)

### ğŸ“‹ **Shell Scripts Status (Legacy/Generated):**
- `scripts/maintenance/cleanup_deadweight.sh` â†’ **KEPT** (auto-generated by `deadweight_scan.py`, one-time maintenance)
- `scripts/maintenance/archive_old_scripts.sh` â†’ **KEPT** (one-time archival maintenance tool)
- `scripts/ci/cleanup_legacy_files_fixed.sh` â†’ **KEPT** (auto-generated by `legacy_file_inventory.py`, one-time cleanup)
- `scripts/emergency/emergency_patch.sh` â†’ **KEPT** (emergency break-glass scenario)

**Note:** These shell scripts are NOT part of normal workflow automation (not called via `npm run`). They are:
- Auto-generated maintenance tools (cleanup_deadweight.sh, cleanup_legacy_files_fixed.sh)
- One-time archival tools (archive_old_scripts.sh)
- Emergency scripts (emergency_patch.sh)

**Status:** âœ… Acceptable per tech stack policy (shell = emergency/maintenance only, not workflow automation)

---

## ğŸ§ª Testing & Validation

Before removing old scripts:

1. âœ… Test JS version works identically
2. âœ… Verify all npm scripts use JS
3. âœ… Run CI/CD with JS scripts
4. âœ… Test on Windows/Mac/Linux
5. âœ… Update all documentation

After validation: **DELETE old Python/shell automation scripts immediately.**

---

## ğŸ“– Contributor Guidelines

**For Contributors:**
- If you see a Python script for automation/workflow â†’ convert to JS
- If you see a shell script for normal workflow â†’ convert to JS
- If you see duplicate scripts (Python + JS) â†’ use JS, delete Python
- If you need AI/analysis functionality â†’ use Python
- If you need workflow automation â†’ use JavaScript

**For Maintainers:**
- Enforce this policy in code reviews
- Block PRs that add Python automation scripts
- Block PRs that add shell scripts for normal workflows
- Require JS conversion for any workflow automation

---

## ğŸ¯ Success Metrics

**This policy is successful when:**
- âœ… 100% of npm scripts use JavaScript
- âœ… Zero Python scripts for workflow automation
- âœ… Zero shell scripts for normal workflows
- âœ… All contributors understand the separation
- âœ… Onboarding time reduced (no "which script?" confusion)
- âœ… Cross-platform compatibility achieved (no Windows/Mac issues)

---

## ğŸ“ Last Updated

**2025-01-30** - Initial tech stack consolidation policy established.

**Migration Status:** Phase 1 Complete - Core JS scripts created and integrated.

